server:
    port: 1998

spring:
    profiles:
        # active: local  # 本地环境
        active: test  # 测试环境
        # active: dev  # 开发环境
        # active: prod  # 线上环境
    application:
        name: manager-gateway-service
    cloud:
        nacos:
            discovery:
                server-addr: localhost:8848  # nacos注册中心地址
            config:
                server-addr: localhost:8848  # nacos配置中心地址
                file-extension: yaml  # 配置文件格式
                group: TEST_GROUP
        sentinel:
            eager: true  # 取消控制台懒加载
            transport:
                dashboard: localhost:9090  # sentinel dashboard地址
                port: 8719  # sentinel api port
            # sentinel配置持久化
            datasource:
                ds1:
                    nacos:
                        server-addr: localhost:8848
                        dataId: manager-gateway-service
                        groupId: TEST_GROUP
                        data-type: json
                        rule-type: flow
        gateway:
            discovery:
                locator:
                    enabled: false  # 是否与服务发现组件进行结合，通过 serviceId 转发到具体的服务实例。默认为false
            # 路由规则配置
            routes:
                - id: manager-task-service-route  # 路由ID
                  # gateway自动从Nacos获取manager-task-service可用节点进行转发
                  # 默认会将所有gateway uri转发
                  uri: lb://manager-task-service
                  predicates:
                      - Path=/mts/**  # 1998/mts/task/select/byid -> 2001/mts/task/select/byid
                  filters:
                      - StripPrefix=1  # 忽略掉第一层前缀进行转发 1998/mts/task/select/byid -> 2001/task/select/byid

#            globalcors:
#                cors-configurations:
#                    '[/**]':
#                        # 这里有个allowCredentials: true这个东西是设置允许访问携带cookie的，这点一定要和前端对应！
#                        allowCredentials: true
#                        # 可以填写多个域名用","隔开 例如 "*"代表允许所有
#                        allowedOrigins: "*"
#                        allowedMethods: "*"
#                        allowedHeaders: "*"
#                        allow-credentials: true
